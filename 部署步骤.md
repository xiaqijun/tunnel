# ğŸš€ Tunnel æœåŠ¡å™¨éƒ¨ç½²æ­¥éª¤

## ğŸ“¦ æ–¹å¼ä¸€ï¼šå®Œæ•´éƒ¨ç½²æµç¨‹ï¼ˆæ¨èï¼‰

### åœ¨æœ¬åœ°ï¼ˆWindowsï¼‰æ“ä½œï¼š

**1. æ‰“åŒ…é¡¹ç›®æ–‡ä»¶**
```cmd
package.bat
```
è¿™ä¼šç”Ÿæˆä¸€ä¸ª `tunnel-deploy-YYYYMMDD.tar.gz` æ–‡ä»¶

**2. ä¸Šä¼ åˆ°æœåŠ¡å™¨**
```cmd
# æ›¿æ¢ your-server-ip ä¸ºä½ çš„æœåŠ¡å™¨ IP
scp tunnel-deploy-*.tar.gz root@your-server-ip:/root/
```

æˆ–ä½¿ç”¨å›¾å½¢åŒ–å·¥å…·ï¼ˆWinSCPã€FileZillaï¼‰ä¸Šä¼ æ–‡ä»¶

### åœ¨æœåŠ¡å™¨ï¼ˆLinuxï¼‰æ“ä½œï¼š

**3. è§£å‹æ–‡ä»¶**
```bash
cd /root
tar -xzf tunnel-deploy-*.tar.gz
cd Tunnel  # æˆ–è§£å‹åçš„æ–‡ä»¶å¤¹å
```

**4. ç¼–è¯‘ç¨‹åº**
```bash
chmod +x deploy/*.sh
bash deploy/linux-deploy.sh
```

**5. ä¿®æ”¹é…ç½®æ–‡ä»¶**
```bash
nano config.yaml
```

âš ï¸ **é‡è¦ï¼šä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š**
```yaml
auth:
  token: "ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„å¼ºå¯†ç ï¼ˆè‡³å°‘20ä½ï¼‰"
```

**6. é…ç½®é˜²ç«å¢™**
```bash
sudo bash deploy/firewall-setup.sh
```

**7. å®‰è£…å¹¶å¯åŠ¨æœåŠ¡**
```bash
sudo bash deploy/install-service.sh
sudo systemctl start tunnel-server
sudo systemctl enable tunnel-server
```

**8. éªŒè¯éƒ¨ç½²**
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status tunnel-server

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u tunnel-server -f
```

**9. è®¿é—® Web ç®¡ç†ç•Œé¢**

æµè§ˆå™¨è®¿é—®ï¼š`http://your-server-ip:8080`

---

## ğŸ“¦ æ–¹å¼äºŒï¼šä½¿ç”¨ Git éƒ¨ç½²

### åœ¨æœåŠ¡å™¨ä¸Šæ“ä½œï¼š

**1. å…‹éš†ä»“åº“ï¼ˆå¦‚æœæœ‰ Git ä»“åº“ï¼‰**
```bash
cd /opt
git clone https://github.com/your-username/Tunnel.git
cd Tunnel
```

**2. æ‰§è¡Œåç»­æ­¥éª¤**
```bash
# ç¼–è¯‘
bash deploy/linux-deploy.sh

# ä¿®æ”¹é…ç½®
nano config.yaml

# é…ç½®é˜²ç«å¢™
sudo bash deploy/firewall-setup.sh

# å®‰è£…æœåŠ¡
sudo bash deploy/install-service.sh

# å¯åŠ¨æœåŠ¡
sudo systemctl start tunnel-server
sudo systemctl enable tunnel-server
```

---

## ğŸ”§ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### æœåŠ¡ç®¡ç†
```bash
# å¯åŠ¨
sudo systemctl start tunnel-server

# åœæ­¢
sudo systemctl stop tunnel-server

# é‡å¯
sudo systemctl restart tunnel-server

# çŠ¶æ€
sudo systemctl status tunnel-server

# å¼€æœºè‡ªå¯
sudo systemctl enable tunnel-server

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u tunnel-server -f
```

### æ‰‹åŠ¨è¿è¡Œï¼ˆæµ‹è¯•ç”¨ï¼‰
```bash
# å‰å°è¿è¡Œ
./bin/tunnel-server -config config.yaml

# åå°è¿è¡Œ
nohup ./bin/tunnel-server -config config.yaml > server.log 2>&1 &
```

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] å·²ä¸Šä¼ é¡¹ç›®æ–‡ä»¶åˆ°æœåŠ¡å™¨
- [ ] å·²æˆåŠŸç¼–è¯‘ï¼ˆbin/tunnel-server å­˜åœ¨ï¼‰
- [ ] å·²ä¿®æ”¹ config.yaml ä¸­çš„ token
- [ ] å·²é…ç½®é˜²ç«å¢™ï¼ˆå¼€æ”¾ 7000 å’Œ 8080 ç«¯å£ï¼‰
- [ ] å·²å®‰è£… systemd æœåŠ¡
- [ ] æœåŠ¡å·²å¯åŠ¨ä¸”è¿è¡Œæ­£å¸¸
- [ ] å¯ä»¥è®¿é—® Web ç®¡ç†ç•Œé¢ï¼ˆhttp://ip:8080ï¼‰
- [ ] å·²è®¾ç½®å¼€æœºè‡ªå¯

---

## ğŸ§ª å®¢æˆ·ç«¯è¿æ¥æµ‹è¯•

**1. ä¿®æ”¹å®¢æˆ·ç«¯é…ç½®**ï¼ˆåœ¨æœ¬åœ° Windowsï¼‰

ç¼–è¾‘ `client-config.yaml`ï¼š
```yaml
server:
  addr: "your-server-ip:7000"  # æ”¹ä¸ºæœåŠ¡å™¨ IP
  token: "ä¸æœåŠ¡å™¨ä¸€è‡´çš„ token"
```

**2. è¿è¡Œå®¢æˆ·ç«¯**
```cmd
bin\tunnel-client.exe -config client-config.yaml
```

**3. æŸ¥çœ‹ Web ç•Œé¢**

è®¿é—® `http://your-server-ip:8080`ï¼ŒæŸ¥çœ‹å®¢æˆ·ç«¯æ˜¯å¦æˆåŠŸè¿æ¥

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
sudo journalctl -u tunnel-server -n 50

# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tlnp | grep -E '7000|8080'

# æ‰‹åŠ¨è¿è¡Œçœ‹é”™è¯¯
./bin/tunnel-server -config config.yaml
```

### æ— æ³•è®¿é—® Web ç•Œé¢
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status tunnel-server

# æ£€æŸ¥é˜²ç«å¢™
sudo iptables -L -n | grep 8080

# æµ‹è¯•æœ¬åœ°è®¿é—®
curl http://localhost:8080
```

### å®¢æˆ·ç«¯æ— æ³•è¿æ¥
- ç¡®è®¤æœåŠ¡å™¨ 7000 ç«¯å£å·²å¼€æ”¾
- ç¡®è®¤ token é…ç½®æ­£ç¡®
- ç¡®è®¤æœåŠ¡å™¨å…¬ç½‘ IP æ­£ç¡®
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

è¯¦ç»†æ–‡æ¡£ï¼š[deploy/INSTALL.md](deploy/INSTALL.md)
